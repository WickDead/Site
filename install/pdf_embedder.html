<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PDF Embedder</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<link rel="stylesheet" href="../responsive.css">
<style>
  #pdf-container {
    width: 100%;
    background: #222;
    padding: 10px 0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .pdf-page-canvas {
    margin-bottom: 20px;
    background: #fff;
    box-shadow: 0 2px 8px #0006;
    border-radius: 4px;
  }
</style>
</head>
<body>
<div id="pdf-container"></div>
<script>
  const url = 'Install.pdf';
  const container = document.getElementById('pdf-container');
  const maxPageWidth = 1000;
  let loadedPdf = null;
  let resizeDebounceTimer = null;

  pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

  async function renderPdfPages(pdf) {
    container.innerHTML = '';
    const availableWidth = Math.min(container.clientWidth || window.innerWidth, maxPageWidth);
    const pixelRatio = window.devicePixelRatio || 1;

    for (let i = 1; i <= pdf.numPages; i++) {
      const page = await pdf.getPage(i);
      const baseViewport = page.getViewport({ scale: 1 });
      const scale = availableWidth / baseViewport.width;
      const viewport = page.getViewport({ scale: scale });

      const canvas = document.createElement('canvas');
      canvas.className = 'pdf-page-canvas';
      canvas.style.width = viewport.width + 'px';
      canvas.style.height = viewport.height + 'px';
      canvas.width = Math.floor(viewport.width * pixelRatio);
      canvas.height = Math.floor(viewport.height * pixelRatio);

      const context = canvas.getContext('2d');
      context.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);

      await page.render({
        canvasContext: context,
        viewport: viewport
      }).promise;

      container.appendChild(canvas);
    }
  }

  pdfjsLib.getDocument(url).promise.then(async function(pdf) {
    loadedPdf = pdf;
    await renderPdfPages(pdf);
  });

  window.addEventListener('resize', function() {
    if (!loadedPdf) {
      return;
    }

    clearTimeout(resizeDebounceTimer);
    resizeDebounceTimer = setTimeout(function() {
      renderPdfPages(loadedPdf);
    }, 200);
  });
</script>
</body>
</html>
